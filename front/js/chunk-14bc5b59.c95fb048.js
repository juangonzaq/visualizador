(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14bc5b59"],{"1cd7":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),c={class:"d-flex-flex-column mt-10"},o={class:"toolbar py-5 pt-lg-0",id:"kt_toolbar"},s={id:"kt_toolbar_container",class:"container-xxl d-flex flex-stack flex-wrap"},r={class:"page-title d-flex flex-column me-3"},l=Object(n["createElementVNode"])("h1",{class:"d-flex text-gray-900 fw-bolder my-1 fs-3"},"Programación",-1),d={class:"breadcrumb breadcrumb-line fw-bold fs-7 my-1"},i=Object(n["createElementVNode"])("li",{class:"breadcrumb-item text-gray-700"},[Object(n["createElementVNode"])("span",{class:"text-gray-700 text-hover-primary"},"Dashboard")],-1),b=Object(n["createElementVNode"])("li",{class:"breadcrumb-item text-gray-700"},[Object(n["createElementVNode"])("span",{class:"text-gray-700 text-hover-primary"},"Reproductor")],-1),u={class:"breadcrumb-item text-gray-700"},m=Object(n["createTextVNode"])(" Programación "),f=Object(n["createElementVNode"])("li",{class:"breadcrumb-item text-gray-700"},"Biblioteca",-1),g={class:"d-flex flex-column-fluid align-items-start container-xxl"},p={class:"col-12"},O={class:"card card-xl-stretch mb-5 mb-xl-8"},j=Object(n["createElementVNode"])("div",{class:"card-header py-6"},[Object(n["createElementVNode"])("h3",{class:"card-title align-items-start flex-column"},[Object(n["createElementVNode"])("span",{class:"card-label fw-bolder fs-3 mb-1"},"Sedes")])],-1),v={class:"card-body py-3"},h={class:"row mt-10"},x={class:"col-12 d-flex"},V=Object(n["createElementVNode"])("p",{class:"fw-bolder fs-6 text-gray-800 me-5"},"Sede: ",-1),E=["textContent"],N={class:"col-12 d-flex justify-content-between"},y=Object(n["createElementVNode"])("p",{class:"fs-4 fw-bolder"},"Lista de canciones",-1),w={class:"row mt-10"},k={class:"col-12 cursor-pointer mb-5"},C={class:"notice d-flex bg-light-primary rounded border-primary border border-dashed px-6 py-3 d-flex justify-content-between"},S={class:"d-flex align-items-center"},B=Object(n["createElementVNode"])("span",{class:"svg-icon svg-icon-2tx svg-icon-primary me-4"},[Object(n["createElementVNode"])("i",{class:"fas fa-music text-primary fs-1"})],-1),I={class:"fw-bold"},R={class:"fs-6 text-gray-700"},L=["href","textContent"],U=["onClick"],_=Object(n["createElementVNode"])("span",{class:"svg-icon svg-icon-3"},[Object(n["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Object(n["createElementVNode"])("path",{d:"M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z",fill:"black"}),Object(n["createElementVNode"])("path",{opacity:"0.5",d:"M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z",fill:"black"}),Object(n["createElementVNode"])("path",{opacity:"0.5",d:"M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z",fill:"black"})])],-1),M=[_],D={class:"modal fade",tabindex:"-1",id:"modal-songs"},H={class:"modal-dialog"},Z={class:"modal-content"},A=Object(n["createStaticVNode"])('<div class="modal-header"><h5 class="modal-title">Canciones disponibles</h5><div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close"><span class="svg-icon svg-icon-2x"><svg fill="none" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><rect xmlns="http://www.w3.org/2000/svg" opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black"></rect><rect xmlns="http://www.w3.org/2000/svg" x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black"></rect></svg></span></div></div>',1),J={class:"modal-body"},P={class:"row"},T={class:"col-12"},q={class:"d-flex align-items-center position-relative w-100"},z=Object(n["createElementVNode"])("span",{class:"svg-icon svg-icon-3 position-absolute translate-middle-y top-50 ms-4"},[Object(n["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Object(n["createElementVNode"])("rect",{opacity:"0.5",x:"17.0365",y:"15.1223",width:"8.15546",height:"2",rx:"1",transform:"rotate(45 17.0365 15.1223)",fill:"black"}),Object(n["createElementVNode"])("path",{d:"M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z",fill:"black"})])],-1),F=Object(n["createElementVNode"])("div",{class:"col-12 my-5"},[Object(n["createElementVNode"])("p",{class:"fw-bolder fs-6"},"Resultados:")],-1),G={class:"col-12"},K={class:"table-responsive"},Q={class:"table align-middle gs-0 gy-5"},W=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",{class:"fw-bolder text-muted bg-light"},[Object(n["createElementVNode"])("th",{class:"ps-4 rounded-start"},"Nombre"),Object(n["createElementVNode"])("th",{class:"pe-4 text-end rounded-end"})])],-1),X={class:"ps-4"},Y=["href","textContent"],$={class:"text-end pe-4"},ee=["onClick"],te=Object(n["createElementVNode"])("span",{class:"svg-icon svg-icon-2x"},[Object(n["createElementVNode"])("i",{class:"fas fa-plus"})],-1),ae=[te],ne={key:1,class:"svg-icon svg-icon-2x p-4"},ce=Object(n["createElementVNode"])("i",{class:"fas fa-check text-success"},null,-1),oe=[ce],se={key:0},re=Object(n["createElementVNode"])("td",{colspan:"2",class:"text-center"},[Object(n["createElementVNode"])("span",{class:"text-muted fw-bold d-block fs-7"},"No se encontraron registros.")],-1),le=[re];function de(e,t,a,_,te,ce){var re=Object(n["resolveComponent"])("loader"),de=Object(n["resolveComponent"])("router-link"),ie=Object(n["resolveComponent"])("draggable");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createVNode"])(re,{show:e.show},null,8,["show"]),Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",r,[l,Object(n["createElementVNode"])("ul",d,[i,b,Object(n["createElementVNode"])("li",u,[Object(n["createVNode"])(de,{to:{name:"player-sites"},class:"text-gray-700 text-hover-primary"},{default:Object(n["withCtx"])((function(){return[m]})),_:1})]),f])])])]),Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",O,[j,Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",x,[V,Object(n["createElementVNode"])("p",{class:"fw-bold fs-6 text-muted",textContent:Object(n["toDisplayString"])(e.site.name)},null,8,E)]),Object(n["createElementVNode"])("div",N,[y,Object(n["createElementVNode"])("button",{class:"btn btn btn-dark","data-bs-toggle":"modal","data-bs-target":"#modal-songs",onClick:t[0]||(t[0]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.searchSongs&&e.searchSongs.apply(e,t)})}," Agregar canción ")])]),Object(n["createElementVNode"])("div",w,[Object(n["createVNode"])(ie,{modelValue:e.songs,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.songs=t}),tag:"transition-group","item-key":"id","ghost-class":"ghost",onStart:t[2]||(t[2]=function(t){return e.drag=!0}),onEnd:t[3]||(t[3]=function(t){return e.drag=!1}),onChange:e.changeOrder},{item:Object(n["withCtx"])((function(t){var a=t.element;return[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",C,[Object(n["createElementVNode"])("div",S,[B,Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("a",{class:"text-gray-700 text-hover-primary",href:a.file,textContent:Object(n["toDisplayString"])(a.order+".- "+a.name)},null,8,L)])])]),Object(n["createElementVNode"])("button",{class:"btn btn-icon btn-bg-light btn-color-danger btn-active-color-danger btn-sm",title:"Eliminar de la lista",onClick:function(t){return e.removeSong(a.id)}},M,8,U)])])]})),_:1},8,["modelValue","onChange"])])])])])]),Object(n["createElementVNode"])("div",D,[Object(n["createElementVNode"])("div",H,[Object(n["createElementVNode"])("div",Z,[A,Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("div",q,[z,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",id:"kt_filter_search",class:"form-control border form-control-sm form-control-solid fw-bold fs-6 ps-11 w-100",placeholder:"Buscar","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.search=t}),onInput:t[5]||(t[5]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.searchSongs&&e.searchSongs.apply(e,t)})},null,544),[[n["vModelText"],e.search]])])]),F,Object(n["createElementVNode"])("div",G,[Object(n["createElementVNode"])("div",K,[Object(n["createElementVNode"])("table",Q,[W,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.modalSongs,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",null,[Object(n["createElementVNode"])("td",X,[Object(n["createElementVNode"])("a",{href:t.file,class:"text-muted text-hover-primary fw-bold d-block fs-7",textContent:Object(n["toDisplayString"])(t.name)},null,8,Y)]),Object(n["createElementVNode"])("td",$,[e.existSong(t.id)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ne,oe)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,class:"btn btn-icon btn-bg-light btn-color-primary btn-sm me-1",onClick:function(a){return e.addSong(t.id)}},ae,8,ee))])])})),256)),0==e.modalSongs.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",se,le)):Object(n["createCommentVNode"])("",!0)])])])])])])])])])])}var ie=a("6c02"),be=a("dac4"),ue=a("52a0"),me=a("3dd1"),fe=a.n(me),ge=a("b76a"),pe=a.n(ge),Oe=a("af56"),je=Object(n["defineComponent"])({name:"Songs",components:{draggable:pe.a},setup:function(){var e=Object(ie["d"])(),t=Object(ie["c"])(),a=new be["a"],c=(new ue["a"],Object(n["ref"])([])),o=Object(n["ref"])({}),s=(Object(n["ref"])(!1),Object(Oe["a"])({position:"bottom-left"})),r=Object(n["ref"])([]),l=Object(n["ref"])(""),d=function(e){c.value=[],a.getSongs(o.value["id"]).then((function(t){c.value=t.data,e&&j()})).catch((function(e){}))},i=function(){return a.getSitesById(t.params.id).then((function(e){o.value=e.data,d(!1)})).catch((function(t){fe.a.fire("Oh no!","Información no encontrada","error"),e.push({name:"player-sites"})}))},b=function(){r.value=[],a.searchSongs(l.value).then((function(e){r.value=e.data})).catch((function(e){}))},u=function(e){var t=!1;return c.value.forEach((function(a){a.id==e&&(t=!0)})),t},m=function(e){g(e,1)},f=function(e){g(e,0)},g=function(e,t){return a.changeStatusSong({song_id:e,status:t,site_id:o.value["id"]}).then((function(e){"1"==t?s.success("Añadido a la lista"):s.error("Removido a la lista"),d(!0)})).catch((function(e){}))},p=function(e){a.updateOrder({data:e}).then((function(e){s.success("Orden actualizado")})).catch((function(e){s.error("No se guardaron los cambios")}))},O=function(){var e=[];return c.value.forEach((function(t,a){e.push({song_id:t.id,site_id:o.value["id"],order:t.order})})),e},j=function(){c.value.forEach((function(e,t){c.value[t].order=t+1})),p(O())};return Object(n["onMounted"])((function(){i()})),{site:o,songs:c,modalSongs:r,search:l,searchSongs:b,existSong:u,addSong:m,removeSong:f,changeOrder:j}}}),ve=a("6b0d"),he=a.n(ve);const xe=he()(je,[["render",de]]);t["default"]=xe},"52a0":function(e,t,a){"use strict";var n=a("16d6"),c=a("bc3a"),o=a.n(c),s=a("5be7"),r=(new n["a"],function(){function e(){}return e.prototype.getData=function(){return o.a.get(n["a"].vueInstance.axios.defaults.baseURL+"/song",Object(s["a"])())},e.prototype.edit=function(e){return o.a.get(n["a"].vueInstance.axios.defaults.baseURL+"/song/"+e,Object(s["a"])())},e.prototype.create=function(e){return o.a.post(n["a"].vueInstance.axios.defaults.baseURL+"/song",e,Object(s["b"])())},e.prototype.update=function(e,t){return o.a.patch(n["a"].vueInstance.axios.defaults.baseURL+"/song/"+e,t,Object(s["b"])())},e.prototype.destroy=function(e){return o.a.delete(n["a"].vueInstance.axios.defaults.baseURL+"/song/"+e,Object(s["a"])())},e.prototype.changeStatus=function(e,t){return o.a.patch(n["a"].vueInstance.axios.defaults.baseURL+"/song/"+e+"/status",t,Object(s["a"])())},e}());t["a"]=r},dac4:function(e,t,a){"use strict";var n=a("16d6"),c=a("bc3a"),o=a.n(c),s=a("5be7"),r=(new n["a"],function(){function e(){}return e.prototype.getSites=function(){return o.a.get(n["a"].vueInstance.axios.defaults.baseURL+"/player/sites",Object(s["a"])())},e.prototype.getSitesById=function(e){return o.a.get(n["a"].vueInstance.axios.defaults.baseURL+"/player/sites/"+e,Object(s["a"])())},e.prototype.getSongs=function(e){return o.a.get(n["a"].vueInstance.axios.defaults.baseURL+"/player/sites/"+e+"/songs",Object(s["a"])())},e.prototype.searchSongs=function(e){return o.a.get(n["a"].vueInstance.axios.defaults.baseURL+"/player/songs?q="+e,Object(s["a"])())},e.prototype.changeStatusSong=function(e){return o.a.post(n["a"].vueInstance.axios.defaults.baseURL+"/player/songs/status",e,Object(s["a"])())},e.prototype.updateOrder=function(e){return o.a.post(n["a"].vueInstance.axios.defaults.baseURL+"/player/songs/order",e,Object(s["a"])())},e}());t["a"]=r}}]);
//# sourceMappingURL=chunk-14bc5b59.c95fb048.js.map