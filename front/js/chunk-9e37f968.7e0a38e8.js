(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e37f968"],{"3f49":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c={class:"d-flex-flex-column mt-10"},o={class:"toolbar py-5 pt-lg-0",id:"kt_toolbar"},l={id:"kt_toolbar_container",class:"container-xxl d-flex flex-stack flex-wrap"},r={class:"page-title d-flex flex-column me-3"},i=Object(a["createElementVNode"])("h1",{class:"d-flex text-gray-900 fw-bolder my-1 fs-3"},"Sorteos",-1),s={class:"breadcrumb breadcrumb-line fw-bold fs-7 my-1"},d=Object(a["createElementVNode"])("li",{class:"breadcrumb-item text-gray-700"},[Object(a["createElementVNode"])("span",{class:"text-gray-700"},"Dashboard")],-1),b={class:"breadcrumb-item text-gray-700"},m=Object(a["createTextVNode"])(" Soteos "),u=Object(a["createElementVNode"])("li",{class:"breadcrumb-item text-primary"},"Detalle",-1),f={class:"d-flex align-items-center py-3 py-md-1"},p=Object(a["createTextVNode"])(" Regresar "),O={class:"d-flex flex-column-fluid align-items-start container-xxl"},j={class:"col-12"},v={class:"card card-xl-stretch mb-5 mb-xl-8"},x={class:"card-header py-6"},g={class:"card-title d-flex"},w=Object(a["createElementVNode"])("span",{class:"card-label fw-bolder fs-3 mb-1"},"Detalle de sorteo: ",-1),h=["textContent"],N={class:"d-flex align-items-center position-relative w-100 mt-5"},V=Object(a["createElementVNode"])("span",{class:"svg-icon svg-icon-3 position-absolute translate-middle-y top-50 ms-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Object(a["createElementVNode"])("rect",{opacity:"0.5",x:"17.0365",y:"15.1223",width:"8.15546",height:"2",rx:"1",transform:"rotate(45 17.0365 15.1223)",fill:"black"}),Object(a["createElementVNode"])("path",{d:"M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z",fill:"black"})])],-1),E={class:"card-body py-3"},y={class:"table-responsive"},C={class:"table align-middle gs-0 gy-5"},k=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",{class:"fw-bolder text-muted bg-light"},[Object(a["createElementVNode"])("th",{class:"ps-4 min-w-325px rounded-start"},"Nombres"),Object(a["createElementVNode"])("th",{class:""},"DNI"),Object(a["createElementVNode"])("th",{class:""},"Ganador"),Object(a["createElementVNode"])("th",{class:""},"Opciones"),Object(a["createElementVNode"])("th",{class:"pe-4 min-w-200px text-end rounded-end"},"Acciones")])],-1),B={class:"ps-4"},D=["textContent"],S={class:""},I=["textContent"],_={class:""},L=["textContent"],R={class:""},U=["textContent"],W={class:"text-end pe-4"},M=["onClick"],T=Object(a["createElementVNode"])("span",{class:"svg-icon svg-icon-3"},[Object(a["createElementVNode"])("i",{class:"fas fa-crown"})],-1),q=[T],H=["onClick"],z=Object(a["createElementVNode"])("span",{class:"svg-icon svg-icon-3"},[Object(a["createElementVNode"])("i",{class:"fas fa-eraser"})],-1),Z=[z],A=["onClick"],F=Object(a["createStaticVNode"])('<span class="svg-icon svg-icon-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black"></path><path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black"></path><path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black"></path></svg></span>',1),G=[F],J={key:0},Q=Object(a["createElementVNode"])("td",{colspan:"5",class:"text-center"},[Object(a["createElementVNode"])("span",{class:"text-muted fw-bold d-block fs-7"},"No se encontraron registros.")],-1),P=[Q],K={class:"modal fade",tabindex:"-1",id:"modal-winner"},X={class:"modal-dialog"},Y={class:"modal-content"},$=Object(a["createStaticVNode"])('<div class="modal-header"><h5 class="modal-title">Seleccionar como ganador de: Sorteo Ica</h5><div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close"><span class="svg-icon svg-icon-2x"><svg fill="none" viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><rect xmlns="http://www.w3.org/2000/svg" opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black"></rect><rect xmlns="http://www.w3.org/2000/svg" x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black"></rect></svg></span></div></div>',1),ee={class:"modal-body"},te={class:"row"},ne={class:"col-12 col-md-6"},ae=Object(a["createElementVNode"])("p",{class:"fw-bolder"},"Participante: ",-1),ce=["textContent"],oe={class:"col-12 col-md-6"},le=Object(a["createElementVNode"])("p",{class:"fw-bolder"},"DNI: ",-1),re=["textContent"],ie={class:"d-flex flex-column my-10 fv-row"},se=Object(a["createElementVNode"])("label",{class:"d-flex align-items-center fs-6 fw-bold mb-2"},[Object(a["createElementVNode"])("span",{class:"required"},"Seleccionar opción ganadora"),Object(a["createElementVNode"])("i",{class:"fas fa-exclamation-circle ms-2 fs-7","data-bs-toggle":"tooltip",title:"Opción"})],-1),de={class:"d-flex flex-wrap mt-5"},be={class:"form-check form-check-custom form-check-solid me-15 mb-5"},me=["value","id"],ue=["for","textContent"],fe={class:"modal-footer"},pe=Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal",id:"animation-close-button"}," Cancelar ",-1),Oe=["disabled"];function je(e,t,n,T,z,F){var Q=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",c,[Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",r,[i,Object(a["createElementVNode"])("ul",s,[d,Object(a["createElementVNode"])("li",b,[Object(a["createVNode"])(Q,{to:{name:"lotteries"},class:"text-gray-700 text-hover-primary"},{default:Object(a["withCtx"])((function(){return[m]})),_:1})]),u])]),Object(a["createElementVNode"])("div",f,[Object(a["createVNode"])(Q,{to:{name:"lotteries"},class:"btn btn btn-dark"},{default:Object(a["withCtx"])((function(){return[p]})),_:1})])])]),Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("h3",g,[w,Object(a["createElementVNode"])("span",{class:"card-label fw-bolder fs-3 mb-1 text-info",textContent:Object(a["toDisplayString"])(e.lottery.name)},null,8,h)]),Object(a["createElementVNode"])("div",N,[V,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",id:"kt_filter_search",class:"form-control border form-control-sm form-control-solid fw-bold fs-6 ps-11 w-100",placeholder:"Buscar","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.search=t}),onInput:t[1]||(t[1]=function(t){return e.getWinners(e.lottery.id)})},null,544),[[a["vModelText"],e.search]])])]),Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("table",C,[k,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.lottery.winners,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",null,[Object(a["createElementVNode"])("td",B,[Object(a["createElementVNode"])("span",{class:"text-dark fw-bolder text-hover-primary mb-1 fs-6",textContent:Object(a["toDisplayString"])(t.name+" "+t.last_name)},null,8,D)]),Object(a["createElementVNode"])("td",S,[Object(a["createElementVNode"])("span",{class:"text-muted fw-bold d-block fs-7",textContent:Object(a["toDisplayString"])(t.document)},null,8,I)]),Object(a["createElementVNode"])("td",_,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(["badge fs-6",[t.winner?"badge-success":"badge-danger"]]),textContent:Object(a["toDisplayString"])(t.winner?"Si":"No")},null,10,L)]),Object(a["createElementVNode"])("td",R,[Object(a["createElementVNode"])("span",{class:"text-muted fw-bold d-block fs-7",textContent:Object(a["toDisplayString"])(t.options)},null,8,U)]),Object(a["createElementVNode"])("td",W,[t.winner?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-2",title:"Quitar como ganador",onClick:function(n){return e.removeWinner(t)}},Z,8,H)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-2",title:"Seleccionar como ganador","data-bs-toggle":"modal","data-bs-target":"#modal-winner",onClick:function(n){return e.selectWinner(t)}},q,8,M)),Object(a["createElementVNode"])("button",{class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm",onClick:function(n){return e.deleteData(t.id)}},G,8,A)])])})),256)),0==e.lottery.winners.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",J,P)):Object(a["createCommentVNode"])("",!0)])])])])])])]),Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("div",X,[Object(a["createElementVNode"])("div",Y,[$,Object(a["createElementVNode"])("div",ee,[e.winner?(Object(a["openBlock"])(),Object(a["createElementBlock"])("form",{key:0,id:"kt_modal_new_target_form",class:"form",onSubmit:t[3]||(t[3]=Object(a["withModifiers"])((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.saveData&&e.saveData.apply(e,t)}),["prevent"]))},[Object(a["createElementVNode"])("div",te,[Object(a["createElementVNode"])("div",ne,[ae,Object(a["createElementVNode"])("p",{textContent:Object(a["toDisplayString"])(e.winner.name+" "+e.winner.last_name)},null,8,ce)]),Object(a["createElementVNode"])("div",oe,[le,Object(a["createElementVNode"])("p",{textContent:Object(a["toDisplayString"])(e.winner.document)},null,8,re)])]),Object(a["createElementVNode"])("div",ie,[se,Object(a["createElementVNode"])("div",de,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.winner.optionList,(function(n,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",be,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"radio",value:n,id:"radio-winner"+c,name:"win","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.winner.winner_option=t})},null,8,me),[[a["vModelRadio"],e.winner.winner_option]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:"radio-winner"+c,textContent:Object(a["toDisplayString"])(n)},null,8,ue)])})),256))])])],32)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",fe,[pe,Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary",disabled:e.validateWinner(),onClick:t[4]||(t[4]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.saveWinner&&e.saveWinner.apply(e,t)})}," Guardar ",8,Oe)])])])])])}var ve=n("6c02"),xe=n("cd71"),ge=n("16d6"),we=n("bc3a"),he=n.n(we),Ne=n("5be7"),Ve=(new ge["a"],function(){function e(){}return e.prototype.getData=function(e,t){return he.a.get(ge["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e+"/winner?q="+t,Object(Ne["a"])())},e.prototype.destroy=function(e){return he.a.delete(ge["a"].vueInstance.axios.defaults.baseURL+"/lottery/winner/"+e,Object(Ne["a"])())},e}()),Ee=Ve,ye=n("3dd1"),Ce=n.n(ye),ke=Object(a["defineComponent"])({name:"LotteriesDetail",components:{},setup:function(){var e=Object(ve["d"])(),t=Object(ve["c"])(),n=new xe["a"],c=new Ee,o=Object(a["ref"])({id:null,name:"",visible:!1,duration:0,position:"",completed:!1,winners:[],site_id:null}),l=Object(a["ref"])(""),r=Object(a["ref"])({}),i=function(){return n.edit(t.params.id).then((function(e){e.data.visible=1==e.data.visible,e.data.completed=1==e.data.completed,e.data.winners=[],o.value=e.data,s(o.value.id)})).catch((function(t){Ce.a.fire("Oh no!","Información no encontrada","error"),e.push({name:"lotteries"})}))},s=function(e){o.value.winners=[],c.getData(e,l.value).then((function(e){o.value.winners=e.data})).catch((function(e){}))},d=function(e){Ce.a.fire({title:"Confirmación!",text:"¿Esta seguro que desea eliminar el registro seleccionado?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar",cancelButtonText:"No, Cancelar",reverseButtons:!0}).then((function(n){n.isConfirmed&&c.destroy(e).then((function(e){Ce.a.fire("Confirmación!","Información eliminada exitosamente","success").then((function(e){s(t.params.id)}))})).catch((function(e){Ce.a.fire("Oh no!","No se completo la operación","error")}))}))},b=function(e){r.value=e,r.value["optionList"]=u(e)},m=function(){var e=!1;return r.value["id"]&&r.value["winner_option"]&&""!=r.value["winner_option"]||(e=!0),e},u=function(e){var t=[];return""!=e.options&&(t=e.options.split(",")),t},f=function(){Ce.a.fire({title:"Confirmación!",text:"¿Esta seguro que desea actualizar los datos?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Actualizar",cancelButtonText:"No, Cancelar",reverseButtons:!0}).then((function(e){e.isConfirmed&&(r.value["winner"]=1,O())}))},p=function(e){Ce.a.fire({title:"Confirmación!",text:"¿Esta seguro que desea remover el registro de ganadores?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Quitar",cancelButtonText:"No, Cancelar",reverseButtons:!0}).then((function(t){t.isConfirmed&&(r.value=e,r.value["winner"]=0,r.value["winner_option"]=null,O())}))},O=function(){n.updateWinner(r.value["id"],r.value).then((function(e){Ce.a.fire("Confirmación!","Información actualizada exitosamente","success").then((function(e){var t;document.getElementById("animation-close-button")&&(null===(t=document.getElementById("animation-close-button"))||void 0===t||t.click()),s(o.value.id)}))})).catch((function(e){Ce.a.fire("Oh no!","No se actualizaron los datos","error"),r.value["winner"]=1}))};return Object(a["onMounted"])((function(){i()})),{lottery:o,deleteData:d,winner:r,validateWinner:m,selectWinner:b,saveWinner:f,removeWinner:p,search:l,getWinners:s}}}),Be=n("6b0d"),De=n.n(Be);const Se=De()(ke,[["render",je]]);t["default"]=Se},cd71:function(e,t,n){"use strict";var a=n("16d6"),c=n("bc3a"),o=n.n(c),l=n("5be7"),r=(new a["a"],function(){function e(){}return e.prototype.getData=function(){return o.a.get(a["a"].vueInstance.axios.defaults.baseURL+"/lottery",Object(l["a"])())},e.prototype.edit=function(e){return o.a.get(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e,Object(l["a"])())},e.prototype.create=function(e){return o.a.post(a["a"].vueInstance.axios.defaults.baseURL+"/lottery",e,Object(l["a"])())},e.prototype.update=function(e,t){return o.a.patch(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e,t,Object(l["a"])())},e.prototype.updateWinner=function(e,t){return o.a.patch(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/winner/"+e,t,Object(l["a"])())},e.prototype.destroy=function(e){return o.a.delete(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e,Object(l["a"])())},e.prototype.changeStatus=function(e,t){return o.a.patch(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e+"/status",t,Object(l["a"])())},e.prototype.changeCompleted=function(e,t){return o.a.patch(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e+"/completed",t,Object(l["a"])())},e.prototype.saveAnimation=function(e,t){return o.a.patch(a["a"].vueInstance.axios.defaults.baseURL+"/lottery/"+e+"/animation",t,Object(l["a"])())},e}());t["a"]=r}}]);
//# sourceMappingURL=chunk-9e37f968.7e0a38e8.js.map